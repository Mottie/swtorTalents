/* Star Wars the Old Republic Recruit By Talent Widget
 * by Rob G (Mottie) 2011
 * http://mottie.guildportal.com
 * licensed under the MIT license.
 *
 */
(function(c){c.swtorTalents=function(l,m){var a,d=this;d.$el=c(l);d.$el.data("swtorTalents",d);d.init=function(){d.options=a=c.extend({},c.swtorTalents.defaultOptions,m);var i,e,h,f,b,g,k=/^e/i.test(a.side)?"empire":"republic",j=a.defaultNeed.toLowerCase();a.defaultNeed="None";if(/^l/.test(j))a.defaultNeed="Low";if(/^m/.test(j))a.defaultNeed="Medium";if(/^h/.test(j))a.defaultNeed="High";b=c('<div id="testsetcolors" style="display:none;"><p class="usebg"/><p class="none"/><p class="low"/><p class="medium"/><p class="high"/></div>'); b.appendTo(c("body"));a.bg=b.find(".usebg").css("color");a.cn=b.find(".none").css("color");a.cl=b.find(".low").css("color");a.cm=b.find(".medium").css("color");a.ch=b.find(".high").css("color");a.cd=b.find("."+a.defaultNeed.toLowerCase()).css("color");b.remove();b="<div>";g=c.swtorTalents[k];for(e in g)if(g[e][0].hasOwnProperty("tree")){b+=a.addHeader?'<div class="groupIcon '+k+"GroupIcon icon_"+e.toLowerCase().replace(/\s+/g,"")+'">'+e+"</div>":"";for(f=0;2>f;f++){j=(a[g[e][f].name.toLowerCase().replace(/\s+/g, "")]||",").split(",");b+='<span class="'+k+"ClassIcon classIcon "+g[e][f].icon+'"><span>';b+=g[e][f].name+'</span></span><span class="talentIcons">';for(h=0;2>h;h++)i=d.getStyle(j[h]||""),b+='<span class="'+i[0].toLowerCase()+'"><span class="'+k+"TalentIcon talentIcon "+a.tooltipClass+" "+g[e][f].tree[h][1]+" "+i[0].toLowerCase()+("class"===a.tooltipMetadata?" ":'" '+a.tooltipMetadata+'="')+"{width:"+a.tooltipWidth+"px;color:"+(a.colorBackground?a.bg+";background:":"")+i[1]+';}" title="<div style=text-align:center>'+ g[e][f].tree[h][0]+": "+i[0]+'</div>"></span></span> ';b+='</span><br class="clear">'}}d.$el.html(b+"</div>")};d.getStyle=function(c){c=c.toLowerCase();return/^n/.test(c)?[a.displayNames.None,a.cn]:/^l/.test(c)?[a.displayNames.Low,a.cl]:/^m/.test(c)?[a.displayNames.Medium,a.cm]:/^h/.test(c)?[a.displayNames.High,a.ch]:[a.displayNames[a.defaultNeed],a.cd]};d.init()};c.swtorTalents.defaultOptions={side:"empire",defaultNeed:"Low",colorBackground:!0,tooltipClass:"tooltip",tooltipWidth:150,tooltipMetadata:"class", addHeader:!0,displayNames:{None:"None",Low:"Low",Medium:"Medium",High:"High"}};c.swtorTalents.empire={"Sith Warrior":[{name:"Juggernaught",icon:"icon_juggernaut",tree:[["Vengeance","icon_juggernaught_veng"],["Immortal","icon_juggernaught_immort"]]},{name:"Maurader",icon:"icon_maurader",tree:[["Annihilation","icon_maurader_annihilation"],["Carnage","icon_maurader_carnage"]]}],"Sith Inquisitor":[{name:"Assassin",icon:"icon_assassin",tree:[["Deception","icon_assassin_deception"],["Darkness","icon_assassin_darkness"]]}, {name:"Sorceror",icon:"icon_sorceror",tree:[["Corruption","icon_sorceror_corruption"],["Lightning","icon_sorceror_lightning"]]}],"Bounty Hunter":[{name:"Powertech",icon:"icon_powertech",tree:[["Shield Tech","icon_powertech_shield_tech"],["Advanced Prototype","icon_powertech_advanced_prototype"]]},{name:"Mercenary",icon:"icon_mercenary",tree:[["Arsenal","icon_mercenary_arsenal"],["Bodyguard","icon_mercenary_bodyguard"]]}],"Imperial Agent":[{name:"Operative",icon:"icon_operative",tree:[["Concealment", "icon_operative_concealment"],["Medic","icon_operative_medic"]]},{name:"Sniper",icon:"icon_sniper",tree:[["Marksmanship","icon_sniper_marksmanship"],["Engineering","icon_sniper_engineering"]]}]};c.swtorTalents.republic={"Jedi Knight":[{name:"Guardian",icon:"icon_guardian",tree:[["Defense","icon_guardian_defense"],["Vigilance","icon_guardian_vigilance"]]},{name:"Sentinel",icon:"icon_sentinel",tree:[["Watchman","icon_sentinel_watchman"],["Combat","icon_sentinel_combat"]]}],"Jedi Consular":[{name:"Sage", icon:"icon_sage",tree:[["Seer","icon_sage_seer"],["Telekinetic","icon_sage_telekinetic"]]},{name:"Shadow",icon:"icon_shadow",tree:[["Kinetic Combat","icon_shadow_kinetic_combat"],["Infiltration","icon_shadow_infiltration"]]}],Smuggler:[{name:"Scoundrel",icon:"icon_scoundrel",tree:[["Scrapper","icon_scoundrel_scrapper"],["Sawbones","icon_scoundrel_sawbones"]]},{name:"Gunslinger",icon:"icon_gunslinger",tree:[["Sharpshooter","icon_gunslinger_sharpshooter"],["Sabeteur","icon_gunslinger_sabeteur"]]}], Trooper:[{name:"Commando",icon:"icon_commando",tree:[["Gunnery","icon_commando_gunnery"],["Combat Medic","icon_commando_combat_medic"]]},{name:"Vanguard",icon:"icon_vanguard",tree:[["Shield Specialist","icon_vanguard_shield_specialist"],["Tactics","icon_vanguard_tactics"]]}]};c.fn.swtorTalents=function(l){return this.each(function(){new c.swtorTalents(this,l)})}})(jQuery);
